(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{"066d":function(e,t,n){"use strict";n("9e31")},"08e2":function(e,t,n){},"0952":function(e,t,n){"use strict";n("ae0e")},"0ae0":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"zfile-admin-short-card"},[n("el-form",{staticClass:"zfile-admin-short-form",attrs:{inline:!0,model:e.searchParam}},[n("el-form-item",{attrs:{label:"直链 Key"}},[n("el-input",{attrs:{size:"small"},model:{value:e.searchParam.key,callback:function(t){e.$set(e.searchParam,"key",t)},expression:"searchParam.key"}})],1),n("el-form-item",{attrs:{label:"路径/文件名"}},[n("el-input",{attrs:{size:"small"},model:{value:e.searchParam.url,callback:function(t){e.$set(e.searchParam,"url",t)},expression:"searchParam.url"}})],1),n("el-form-item",{attrs:{label:"创建日期"}},[n("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.dateChange},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.init}},[e._v("查询")])],1)],1),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.openAddLinkItemDialog}},[e._v("新增直链")]),n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:e.batchDeleteLinkItem}},[e._v("删除所选")]),n("el-table",{ref:"shortLinkTable",attrs:{data:e.linkLog,"default-sort":{prop:"createDate",order:"descending"}},on:{"row-click":e.handleRowClick,"sort-change":e.sortMethod}},[n("el-table-column",{attrs:{type:"selection",label:"序号"}}),n("el-table-column",{attrs:{type:"index",label:"序号"}}),n("el-table-column",{attrs:{prop:"key","show-overflow-tooltip":!0,width:"100",sortable:"custom","sort-orders":["ascending","descending"],label:"Key"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("a",{attrs:{target:"_blank",href:e.siteDomain+"/s/"+t.row.key}},[e._v(e._s(t.row.key))]),n("i",{staticClass:"el-icon-edit-outline table-edit-icon",on:{click:function(n){return e.editKey(t.row.id)}}})]}}])}),n("el-table-column",{attrs:{prop:"url","show-overflow-tooltip":!0,sortable:"custom","sort-orders":["ascending","descending"],label:"路径"}}),n("el-table-column",{attrs:{prop:"createDate",width:"150",sortable:"custom","sort-orders":["ascending","descending"],label:"创建日期"}}),n("el-table-column",{attrs:{width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",iconColor:"red",title:"确定删除此直链"},on:{confirm:function(n){return e.deleteLink(t.row.id)}}},[n("el-button",{staticClass:"el-icon-delete",attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),n("el-pagination",{attrs:{background:"","current-page":e.searchParam.page,"page-sizes":[10,50,100,200,999999],layout:"total, sizes, prev, pager, next, jumper","page-size":e.searchParam.limit,total:e.searchParam.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e.addLinkVisible?n("el-dialog",{attrs:{id:"cacheDialog",width:"50%",title:"直链管理","modal-append-to-body":!1,visible:e.addLinkVisible},on:{"update:visible":function(t){e.addLinkVisible=t}}},[n("el-form",{attrs:{model:e.addLinkModel,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"驱动器 ID"}},[n("el-select",{attrs:{placeholder:"请选择驱动器"},model:{value:e.addLinkModel.driveId,callback:function(t){e.$set(e.addLinkModel,"driveId",t)},expression:"addLinkModel.driveId"}},e._l(e.driveList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[n("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.id))])])})),1)],1),n("el-form-item",{attrs:{label:"路径"}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入路径地址"},model:{value:e.addLinkModel.path,callback:function(t){e.$set(e.addLinkModel,"path",t)},expression:"addLinkModel.path"}},[n("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("/directlink/"+e._s(e.addLinkModel.driveId))])])],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:e.addLinkItemAction}},[e._v("保存")]),n("el-button",{attrs:{icon:"el-icon-close",size:"small"},on:{click:function(t){e.addLinkVisible=!1}}},[e._v("关闭")])],1)],1):e._e()],1)},o=[],i={name:"ShortLink",data:function(){return{addLinkModel:{driveId:null,path:""},addLinkVisible:!1,linkUrl:"",linkLog:[],searchParam:{page:1,limit:10,total:0,url:"",key:"",orderBy:"",orderDirection:""},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]},date:["",""],driveList:[],siteDomain:""}},methods:{editKey:function(e){var t=this;this.$prompt("请输入要修改为的 Key。","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(n){var a=n.value;t.$http.get("admin/api/short-link/key",{params:{id:e,newKey:a}}).then((function(){t.$message({message:"修改成功",type:"success"}),t.init()}))}))},handleRowClick:function(e){this.$refs.shortLinkTable.toggleRowSelection(e)},batchDeleteLinkItem:function(){var e=this,t=this.$refs.shortLinkTable.selection;0!==t.length?this.$confirm("删除后不可恢复, 是否确认删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(n){if("confirm"===n){var a=[];for(var o in t)a[o]=t[o].id;e.$http.delete("admin/api/short-link",{params:{id:a}}).then((function(t){0===t.data.code?(e.$message.success("删除成功"),e.init()):e.$message.error(t.data.msg)}))}}}):this.$message.warning("请至少选中一行数据")},addLinkItemAction:function(){var e=this;alert(this.$store.getters.domain),this.addLinkModel.path=this.common.removeDuplicateSeparator("/"+this.addLinkModel.path),this.$http.get("api/short-link",{params:this.addLinkModel}).then((function(){e.$message.success("添加成功"),e.init(),e.addLinkVisible=!1}))},openAddLinkItemDialog:function(){this.addLinkVisible=!0},dateChange:function(){this.date?(this.searchParam.dateFrom=this.date[0],this.searchParam.dateTo=this.date[1]):(this.searchParam.dateFrom="",this.searchParam.dateTo="")},sortMethod:function(e){var t=e.prop,n=e.order;this.searchParam.orderBy=t,this.searchParam.orderDirection="descending"===n?"desc":"asc",this.init()},handleSizeChange:function(e){this.searchParam.limit=e,this.searchParam.page=1,this.init()},handleCurrentChange:function(e){this.searchParam.page=e,this.init()},deleteLink:function(e){var t=this;this.$http.get("admin/link/delete/".concat(e)).then((function(e){e.data.code===t.common.responseCode.SUCCESS?(t.$message.success("删除成功"),t.init()):t.$message.error(e.data.msg)}))},init:function(){var e=this;this.$http.get("admin/link/list",{params:this.searchParam}).then((function(t){e.linkLog=t.data.data.content,e.searchParam.total=t.data.data.totalElements,e.searchParam.limit=t.data.data.size}))},loadDriveList:function(){var e=this;this.$http.get("api/drive/list").then((function(t){e.driveList=t.data.data}))},getDomainId:function(){var e=this;this.$http.get("admin/config").then((function(t){e.siteDomain=t.data.data.domain}))}},mounted:function(){this.init(),this.loadDriveList(),this.getDomainId()}},r=i,s=(n("0952"),n("2877")),l=Object(s["a"])(r,a,o,!1,null,"1513b0ea",null);t["default"]=l.exports},"121e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{attrs:{shadow:"false"}},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{id:"siteForm","element-loading-text":"保存中...",rules:e.rules,model:e.form,"label-width":"auto","status-icon":!0}},[n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"站点名称",prop:"siteName"}},[n("el-input",{model:{value:e.form.siteName,callback:function(t){e.$set(e.form,"siteName",t)},expression:"form.siteName"}})],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"站点域名",prop:"domain"}},[n("el-input",{model:{value:e.form.domain,callback:function(t){e.$set(e.form,"domain",t)},expression:"form.domain"}}),n("div",{staticClass:"zfile-word-aux zfile-margin-left-unset"},[e._v("此地址用于生成直链及本次存储下载使用，请务必保持和服务端地址一样。")])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitForm("form")}}},[e._v("保存设置")])],1)],1)],1)},o=[],i=n("4328"),r=n.n(i),s={name:"SiteSetting",data:function(){return{form:{siteName:"",domain:""},loading:!1,rules:{siteName:[{required:!0,message:"请输入站点名称",trigger:"change"}],domain:[{required:!0,type:"url",message:"请输入正确的域名，需以 http:// 或 https:// 开头",trigger:"change"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0,t.$http.post("admin/config",r.a.stringify(t.form)).then((function(e){t.loading=!1,e.data.code===t.common.responseCode.SUCCESS?t.$message({message:"保存成功",type:"success"}):t.$message({message:e.data.msg,type:"error"})}))}))}},mounted:function(){var e=this;this.$http.get("admin/config").then((function(t){e.form=t.data.data;var n=""===e.$http.defaults.baseURL?window.location.origin:e.$http.defaults.baseURL,a=e.form.domain;n!==a&&e.$confirm("检测到服务端地址为 ".concat(n,"，当前配置站点域名为 ").concat(a,"，是否自动进行修正（不修正可能会影响下载、文件夹加密和文档预览功能）？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(t){"confirm"===t&&(e.form.domain=n,e.$http.post("admin/config",r.a.stringify(e.form)).then((function(t){e.loading=!1,t.data.code===e.common.responseCode.SUCCESS?e.$message({message:"修正成功",type:"success"}):e.$message({message:t.data.msg,type:"error"})})))}})}))}},l=s,c=(n("4b7f"),n("2877")),d=Object(c["a"])(l,a,o,!1,null,"875b6660",null);t["default"]=d.exports},"1c47":function(e,t,n){},2067:function(e,t,n){"use strict";n("1c47")},"2aeb1":function(e,t,n){},3823:function(e,t,n){"use strict";n("b611")},4127:function(e,t,n){"use strict";var a=n("d233"),o=n("b313"),i={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},r=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,serializeDate:function(e){return r.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,n,o,i,r,l,c,d,u,m,f,p){var h=t;if("function"===typeof c)h=c(n,h);else if(h instanceof Date)h=m(h);else if(null===h){if(i)return l&&!p?l(n,s.encoder):n;h=""}if("string"===typeof h||"number"===typeof h||"boolean"===typeof h||a.isBuffer(h)){if(l){var g=p?n:l(n,s.encoder);return[f(g)+"="+f(l(h,s.encoder))]}return[f(n)+"="+f(String(h))]}var v,b=[];if("undefined"===typeof h)return b;if(Array.isArray(c))v=c;else{var y=Object.keys(h);v=d?y.sort(d):y}for(var w=0;w<v.length;++w){var _=v[w];r&&null===h[_]||(b=Array.isArray(h)?b.concat(e(h[_],o(n,_),o,i,r,l,c,d,u,m,f,p)):b.concat(e(h[_],n+(u?"."+_:"["+_+"]"),o,i,r,l,c,d,u,m,f,p)))}return b};e.exports=function(e,t){var n=e,r=t?a.assign({},t):{};if(null!==r.encoder&&void 0!==r.encoder&&"function"!==typeof r.encoder)throw new TypeError("Encoder has to be a function.");var c="undefined"===typeof r.delimiter?s.delimiter:r.delimiter,d="boolean"===typeof r.strictNullHandling?r.strictNullHandling:s.strictNullHandling,u="boolean"===typeof r.skipNulls?r.skipNulls:s.skipNulls,m="boolean"===typeof r.encode?r.encode:s.encode,f="function"===typeof r.encoder?r.encoder:s.encoder,p="function"===typeof r.sort?r.sort:null,h="undefined"!==typeof r.allowDots&&r.allowDots,g="function"===typeof r.serializeDate?r.serializeDate:s.serializeDate,v="boolean"===typeof r.encodeValuesOnly?r.encodeValuesOnly:s.encodeValuesOnly;if("undefined"===typeof r.format)r.format=o["default"];else if(!Object.prototype.hasOwnProperty.call(o.formatters,r.format))throw new TypeError("Unknown format option provided.");var b,y,w=o.formatters[r.format];"function"===typeof r.filter?(y=r.filter,n=y("",n)):Array.isArray(r.filter)&&(y=r.filter,b=y);var _,C=[];if("object"!==typeof n||null===n)return"";_=r.arrayFormat in i?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices";var k=i[_];b||(b=Object.keys(n)),p&&b.sort(p);for(var S=0;S<b.length;++S){var x=b[S];u&&null===n[x]||(C=C.concat(l(n[x],x,k,d,u,m?f:null,y,p,h,g,w,v)))}var I=C.join(c),D=!0===r.addQueryPrefix?"?":"";return I.length>0?D+I:""}},4328:function(e,t,n){"use strict";var a=n("4127"),o=n("9e6a"),i=n("b313");e.exports={formats:i,parse:o,stringify:a}},"432e":function(e,t,n){"use strict";n("b0ca")},"4b7f":function(e,t,n){"use strict";n("6898")},"50b8":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12,offset:6}},[n("h2",[e._v("在线获取 SharePoint SiteId 小工具")]),n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form}},[n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"版本"}},[n("el-radio",{attrs:{label:"Standard"},on:{change:e.changeType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[e._v("国际版")]),n("el-radio",{attrs:{label:"China"},on:{change:e.changeType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[e._v("世纪互联")])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"AccessToken",prop:"accessToken"}},[n("el-input",{attrs:{placeholder:"请输入 AccessToken"},model:{value:e.form.accessToken,callback:function(t){e.$set(e.form,"accessToken",t)},expression:"form.accessToken"}}),n("el-link",{directives:[{name:"show",rawName:"v-show",value:"Standard"===e.form.type,expression:"form.type === 'Standard'"}],attrs:{target:"_blank",icon:"el-icon-link",href:e.$http.defaults.baseURL+"/onedrive/authorize"}},[e._v("前往获取令牌 (国际版)")]),n("el-link",{directives:[{name:"show",rawName:"v-show",value:"China"===e.form.type,expression:"form.type === 'China'"}],attrs:{target:"_blank",icon:"el-icon-link",href:e.$http.defaults.baseURL+"/onedrive/china-authorize"}},[e._v("前往获取令牌 (世纪互联)")])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"SharePoint 域名",prop:"domainPrefix"}},[n("el-input",{attrs:{placeholder:"请输入 SharePoint 域名"},model:{value:e.form.domainPrefix,callback:function(t){e.$set(e.form,"domainPrefix",t)},expression:"form.domainPrefix"}},[n("template",{slot:"append"},[e._v(".sharepoint."+e._s(e.form.domainType))])],2)],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"站点名称",prop:"siteName"}},[n("template",{slot:"label"},[n("span",[e._v("站点名称")]),n("span",{staticClass:"zfile-word-aux"},[e._v("（网址上域名后面的 /sites/xxx 或/teams/xxx）")])]),n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入站点名称"},on:{input:function(t){return e.submitForm("form")}},model:{value:e.form.siteName,callback:function(t){e.$set(e.form,"siteName",t)},expression:"form.siteName"}},[n("el-select",{attrs:{slot:"prepend"},on:{input:function(t){return e.change(t)}},slot:"prepend",model:{value:e.form.siteType,callback:function(t){e.$set(e.form,"siteType",t)},expression:"form.siteType"}},[n("el-option",{attrs:{label:"/sites/",value:"/sites/"}}),n("el-option",{attrs:{label:"/teams/",value:"/teams/"}})],1)],1)],2),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"SiteID"}},[n("el-input",{attrs:{type:"small"},model:{value:e.siteId,callback:function(t){e.siteId=t},expression:"siteId"}},[n("el-tooltip",{staticClass:"item",attrs:{slot:"append",effect:"dark",content:"复制",placement:"bottom"},slot:"append"},[n("el-button",{attrs:{type:"small",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyText(e.siteId)}}})],1)],1)],1)],1)],1)],1)},o=[],i={name:"SharePointSiteId",data:function(){return{form:{type:"Standard",accessToken:"",domainPrefix:"",siteType:"/sites/",siteName:"",domainType:"com"},siteId:"",rules:{accessToken:[{required:!0,message:"AccessToken 不能为空",trigger:"change"}],domainPrefix:[{required:!0,message:"SharePoint 域名不能为空",trigger:"change"}],siteName:[{required:!0,message:"站点名称不能为空",trigger:"change"}]},loading:!1}},watch:{"form.type":function(){this.form.accessToken&&this.getDomainPrefix()},"form.accessToken":function(){this.form.accessToken&&this.getDomainPrefix()}},methods:{getDomainPrefix:function(){var e=this;this.$http.post("/sharepoint/getDomainPrefix",this.form).then((function(t){t.data.code===e.common.responseCode.SUCCESS&&(e.form.domainPrefix=t.data.data)}))},copyText:function(e){var t=this;this.$copyText(e).then((function(){t.$message.success("复制成功")}),(function(){t.$message.error("复制失败")}))},changeType:function(){"Standard"===this.form.type?this.form.domainType="com":"China"===this.form.type&&(this.form.domainType="cn")},change:function(){this.$forceUpdate()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.loading=!1,!1;t.loading=!0,t.$http.post("/sharepoint/getSiteId",t.form).then((function(e){e.data.code===t.common.responseCode.SUCCESS&&(t.siteId=e.data.data,t.$forceUpdate(),t.$message.success("自动获取 SiteId 成功")),t.loading=!1}))}))}}},r=i,s=(n("5904"),n("2877")),l=Object(s["a"])(r,a,o,!1,null,"3ac09bd8",null);t["default"]=l.exports},"578a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"zfile-login"},[n("el-form",{ref:"loginForm",staticClass:"zfile-login-form",attrs:{model:e.loginForm,rules:e.rules,"status-icon":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit(t)}}},[n("div",{staticClass:"zfile-login-title box animate__animated animate__fadeIn"},[e._v("\n            Z-File\n            "),n("small",[e._v("Admin")])]),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{prop:"username"}},[n("el-input",{attrs:{type:"text","prefix-icon":"el-icon-user","auto-complete":"off",placeholder:"用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username","string"===typeof t?t.trim():t)},expression:"loginForm.username"}})],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password","prefix-icon":"el-icon-key","auto-complete":"off",placeholder:"密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password","string"===typeof t?t.trim():t)},expression:"loginForm.password"}})],1),n("el-form-item",[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                    将配置文件 application.properties 中 zfile.debug 修改为 true, 访问首页即可重置 "),n("br"),e._v("\n                    点击可前往文档查看操作方式\n                ")]),n("el-link",{staticClass:"zfile-float-right",attrs:{icon:"el-icon-question",underline:!1},on:{click:e.openResetPwdDocs}},[e._v("忘记密码")])],1)],1),n("el-form-item",[n("el-button",{staticClass:"el-col-24",attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v("登录\n            ")])],1)],1)],1)},o=[],i=n("4328"),r=n.n(i),s={name:"Login",data:function(){return{loading:!1,loginForm:{},rules:{username:[{required:!0,message:"账号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]}}},mounted:function(){var e=this;this.$http.get("is-installed").then((function(t){var n=t.data;0===n.code&&e.$router.push("/install")})),document.title="登录 | 后台管理"},methods:{openResetPwdDocs:function(){window.open("http://docs.zhaojun.im/zfile/#/question?id=reset-pwd")},handleSubmit:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return!1;e.$http.post("login",r.a.stringify(e.loginForm)).then((function(t){e.$message({message:t.data.msg,type:"success",duration:1e3,onClose:function(){e.$router.push("/admin")}})}))}))}}},l=s,c=(n("2067"),n("2877")),d=Object(c["a"])(l,a,o,!1,null,"085cced0",null);t["default"]=d.exports},5904:function(e,t,n){"use strict";n("08e2")},"615b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{attrs:{shadow:"false"}},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{id:"siteForm","element-loading-text":"保存中...",model:e.form,"label-width":"auto","status-icon":!0}},[n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"页面布局"}},[n("el-radio",{attrs:{label:"full"},model:{value:e.form.layout,callback:function(t){e.$set(e.form,"layout",t)},expression:"form.layout"}},[e._v("全屏")]),n("el-radio",{attrs:{label:"center"},model:{value:e.form.layout,callback:function(t){e.$set(e.form,"layout",t)},expression:"form.layout"}},[e._v("居中")])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"列表尺寸"}},[n("el-radio",{attrs:{label:"medium"},model:{value:e.form.tableSize,callback:function(t){e.$set(e.form,"tableSize",t)},expression:"form.tableSize"}},[e._v("大")]),n("el-radio",{attrs:{label:"small"},model:{value:e.form.tableSize,callback:function(t){e.$set(e.form,"tableSize",t)},expression:"form.tableSize"}},[e._v("中")]),n("el-radio",{attrs:{label:"mini"},model:{value:e.form.tableSize,callback:function(t){e.$set(e.form,"tableSize",t)},expression:"form.tableSize"}},[e._v("小")])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"显示操作按钮"}},[n("el-switch",{model:{value:e.form.showOperator,callback:function(t){e.$set(e.form,"showOperator",t)},expression:"form.showOperator"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                    显示下载和复制按钮, 在移动端只显示下载\n                ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"显示文档区"}},[n("el-switch",{model:{value:e.form.showDocument,callback:function(t){e.$set(e.form,"showDocument",t)},expression:"form.showDocument"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                    在文件列表下，显示当前文件夹中 readme.md 的内容，支持 md 和 html 语法\n                ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"显示公告"}},[n("el-switch",{model:{value:e.form.showAnnouncement,callback:function(t){e.$set(e.form,"showAnnouncement",t)},expression:"form.showAnnouncement"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                    网站顶部，显示公告内容，支持 HTML 语法\n                ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"公告内容"}},[n("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入公告内容"},model:{value:e.form.announcement,callback:function(t){e.$set(e.form,"announcement",t)},expression:"form.announcement"}})],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"自定义 CSS"}},[n("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入自定义 CSS 内容"},model:{value:e.form.customCss,callback:function(t){e.$set(e.form,"customCss",t)},expression:"form.customCss"}})],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"自定义 JS"}},[n("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入自定义 JS 内容"},model:{value:e.form.customJs,callback:function(t){e.$set(e.form,"customJs",t)},expression:"form.customJs"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.submitForm("form")}}},[e._v("保存设置")])],1)],1)],1)},o=[],i=n("4328"),r=n.n(i),s={name:"ViewSetting",data:function(){return{form:{layout:"",tableSize:"",showOperator:!1,showDocument:!1,showAnnouncement:!1,announcement:"",customCss:"",customJs:""},loading:!1}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0,t.$http.post("admin/config",r.a.stringify(t.form)).then((function(e){t.loading=!1,e.data.code===t.common.responseCode.SUCCESS&&t.$message({message:"保存成功",type:"success"})}))}))}},mounted:function(){var e=this;this.$http.get("admin/config").then((function(t){e.form=t.data.data}))}},l=s,c=n("2877"),d=Object(c["a"])(l,a,o,!1,null,"570a4a55",null);t["default"]=d.exports},6898:function(e,t,n){},"6dde":function(e,t,n){},"8d1d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",[n("div",[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.addDrive}},[e._v("新增")]),n("span",{staticClass:"zfile-word-aux"},[e._v("提示：拖拽行可以进行排序")])],1),n("el-table",{ref:"driveTable",attrs:{data:e.driveList,"row-key":"id","highlight-current-row":""}},[n("el-table-column",{attrs:{prop:"id",align:"center",width:"100",label:"驱动器ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.id))]),n("i",{staticClass:"el-icon-edit-outline table-edit-icon",on:{click:function(n){return e.editDriveId(t.row.id)}}})]}}])}),n("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,label:"驱动器名称"}}),n("el-table-column",{attrs:{prop:"type",formatter:e.typeFormatter,"show-overflow-tooltip":!0,width:"160",label:"所属策略"}}),n("el-table-column",{attrs:{prop:"enable",width:"100",label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.switchEnableStatus(t.row)}},model:{value:t.row.enable,callback:function(n){e.$set(t.row,"enable",n)},expression:"scope.row.enable"}})]}}])}),n("el-table-column",{attrs:{prop:"enableCache",width:"100",label:"缓存开启"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.switchCacheEnableStatus(t.row)}},model:{value:t.row.enableCache,callback:function(n){e.$set(t.row,"enableCache",n)},expression:"scope.row.enableCache"}})]}}])}),n("el-table-column",{attrs:{prop:"autoRefreshCache",width:"120",label:"缓存自动刷新"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.switchAutoRefreshStatus(t.row)}},model:{value:t.row.autoRefreshCache,callback:function(n){e.$set(t.row,"autoRefreshCache",n)},expression:"scope.row.autoRefreshCache"}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"left"}},[n("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.editDrive(t.row)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"缓存管理",placement:"top"}},[n("el-button",{staticClass:"el-icon-s-operation",attrs:{size:"mini",disabled:!t.row.enableCache,type:"primary"},on:{click:function(n){return e.cacheManage(t.row)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"文件过滤",placement:"bottom"}},[n("el-button",{staticClass:"el-icon-view",attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.showFilterDialog(t.row)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"right"}},[n("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.deleteDrive(t.row)}}})],1)]]}}])})],1),e.driveEditDialogVisible?n("el-dialog",{attrs:{width:"80%",title:"驱动器设置","modal-append-to-body":!1,visible:e.driveEditDialogVisible,top:"10vh","destroy-on-close":!0},on:{"update:visible":function(t){e.driveEditDialogVisible=t}}},[n("drive-edit",{attrs:{"drive-item":e.driveItem,close:e.closeDriveEdit,"support-strategy":e.supportStrategy}})],1):e._e(),e.filterDialogVisible?n("el-dialog",{attrs:{width:"40%",title:"过滤规则","modal-append-to-body":!1,visible:e.filterDialogVisible,top:"10vh","destroy-on-close":!0},on:{"update:visible":function(t){e.filterDialogVisible=t}}},[n("filter-pattern",{attrs:{"drive-id":e.currentCacheManageId,close:e.closeFilterDialog}})],1):e._e(),e.cacheManageVisible?n("el-dialog",{attrs:{id:"cacheDialog",width:"70%",title:"缓存管理","modal-append-to-body":!1,visible:e.cacheManageVisible,top:"10vh","destroy-on-close":!0},on:{"update:visible":function(t){e.cacheManageVisible=t}}},[n("cache-manager",{attrs:{"current-cache-manage-id":this.currentCacheManageId}})],1):e._e()],1)},o=[];
/**!
 * Sortable 1.13.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s.apply(this,arguments)}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){r(e,t,n[t])}))}return e}function c(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}function d(e,t){if(null==e)return{};var n,a,o=c(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u="1.13.0";function m(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var f=m(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),p=m(/Edge/i),h=m(/firefox/i),g=m(/safari/i)&&!m(/chrome/i)&&!m(/android/i),v=m(/iP(ad|od|hone)/i),b=m(/chrome/i)&&m(/android/i),y={capture:!1,passive:!1};function w(e,t,n){e.addEventListener(t,n,!f&&y)}function _(e,t,n){e.removeEventListener(t,n,!f&&y)}function C(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function k(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function S(e,t,n,a){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&C(e,t):C(e,t))||a&&e===n)return e;if(e===n)break}while(e=k(e))}return null}var x,I=/\s+/g;function D(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(I," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(I," ")}}function E(e,t,n){var a=e&&e.style;if(a){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in a||-1!==t.indexOf("webkit")||(t="-webkit-"+t),a[t]=n+("string"===typeof n?"":"px")}}function T(e,t){var n="";if("string"===typeof e)n=e;else do{var a=E(e,"transform");a&&"none"!==a&&(n=a+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function $(e,t,n){if(e){var a=e.getElementsByTagName(t),o=0,i=a.length;if(n)for(;o<i;o++)n(a[o],o);return a}return[]}function P(){var e=document.scrollingElement;return e||document.documentElement}function z(e,t,n,a,o){if(e.getBoundingClientRect||e===window){var i,r,s,l,c,d,u;if(e!==window&&e.parentNode&&e!==P()?(i=e.getBoundingClientRect(),r=i.top,s=i.left,l=i.bottom,c=i.right,d=i.height,u=i.width):(r=0,s=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!f))do{if(o&&o.getBoundingClientRect&&("none"!==E(o,"transform")||n&&"static"!==E(o,"position"))){var m=o.getBoundingClientRect();r-=m.top+parseInt(E(o,"border-top-width")),s-=m.left+parseInt(E(o,"border-left-width")),l=r+i.height,c=s+i.width;break}}while(o=o.parentNode);if(a&&e!==window){var p=T(o||e),h=p&&p.a,g=p&&p.d;p&&(r/=g,s/=h,u/=h,d/=g,l=r+d,c=s+u)}return{top:r,left:s,bottom:l,right:c,width:u,height:d}}}function O(e,t,n){var a=j(e,!0),o=z(e)[t];while(a){var i=z(a)[n],r=void 0;if(r="top"===n||"left"===n?o>=i:o<=i,!r)return a;if(a===P())break;a=j(a,!1)}return!1}function N(e,t,n){var a=0,o=0,i=e.children;while(o<i.length){if("none"!==i[o].style.display&&i[o]!==Ke.ghost&&i[o]!==Ke.dragged&&S(i[o],n.draggable,e,!1)){if(a===t)return i[o];a++}o++}return null}function M(e,t){var n=e.lastElementChild;while(n&&(n===Ke.ghost||"none"===E(n,"display")||t&&!C(n,t)))n=n.previousElementSibling;return n||null}function F(e,t){var n=0;if(!e||!e.parentNode)return-1;while(e=e.previousElementSibling)"TEMPLATE"===e.nodeName.toUpperCase()||e===Ke.clone||t&&!C(e,t)||n++;return n}function A(e){var t=0,n=0,a=P();if(e)do{var o=T(e),i=o.a,r=o.d;t+=e.scrollLeft*i,n+=e.scrollTop*r}while(e!==a&&(e=e.parentNode));return[t,n]}function L(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[n][a])return Number(n);return-1}function j(e,t){if(!e||!e.getBoundingClientRect)return P();var n=e,a=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=E(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return P();if(a||t)return n;a=!0}}}while(n=n.parentNode);return P()}function R(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function q(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function U(e,t){return function(){if(!x){var n=arguments,a=this;1===n.length?e.call(a,n[0]):e.apply(a,n),x=setTimeout((function(){x=void 0}),t)}}}function B(){clearTimeout(x),x=void 0}function H(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function X(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var V="Sortable"+(new Date).getTime();function Y(){var e,t=[];return{captureAnimationState:function(){if(t=[],this.options.animation){var e=[].slice.call(this.el.children);e.forEach((function(e){if("none"!==E(e,"display")&&e!==Ke.ghost){t.push({target:e,rect:z(e)});var n=l({},t[t.length-1].rect);if(e.thisAnimationDuration){var a=T(e,!0);a&&(n.top-=a.f,n.left-=a.e)}e.fromRect=n}}))}},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(L(t,{target:e}),1)},animateAll:function(n){var a=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof n&&n());var o=!1,i=0;t.forEach((function(e){var t=0,n=e.target,r=n.fromRect,s=z(n),l=n.prevFromRect,c=n.prevToRect,d=e.rect,u=T(n,!0);u&&(s.top-=u.f,s.left-=u.e),n.toRect=s,n.thisAnimationDuration&&q(l,s)&&!q(r,s)&&(d.top-s.top)/(d.left-s.left)===(r.top-s.top)/(r.left-s.left)&&(t=W(d,l,c,a.options)),q(s,r)||(n.prevFromRect=r,n.prevToRect=s,t||(t=a.options.animation),a.animate(n,d,s,t)),t&&(o=!0,i=Math.max(i,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"===typeof n&&n()}),i):"function"===typeof n&&n(),t=[]},animate:function(e,t,n,a){if(a){E(e,"transition",""),E(e,"transform","");var o=T(this.el),i=o&&o.a,r=o&&o.d,s=(t.left-n.left)/(i||1),l=(t.top-n.top)/(r||1);e.animatingX=!!s,e.animatingY=!!l,E(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=K(e),E(e,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),E(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){E(e,"transition",""),E(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),a)}}}}function K(e){return e.offsetWidth}function W(e,t,n,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*a.animation}var J=[],Z={initializeByDefault:!0},G={mount:function(e){for(var t in Z)Z.hasOwnProperty(t)&&!(t in e)&&(e[t]=Z[t]);J.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),J.push(e)},pluginEvent:function(e,t,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var o=e+"Global";J.forEach((function(a){t[a.pluginName]&&(t[a.pluginName][o]&&t[a.pluginName][o](l({sortable:t},n)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](l({sortable:t},n)))}))},initializePlugins:function(e,t,n,a){for(var o in J.forEach((function(a){var o=a.pluginName;if(e.options[o]||a.initializeByDefault){var i=new a(e,t,e.options);i.sortable=e,i.options=e.options,e[o]=i,s(n,i.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var i=this.modifyOption(e,o,e.options[o]);"undefined"!==typeof i&&(e.options[o]=i)}},getEventProperties:function(e,t){var n={};return J.forEach((function(a){"function"===typeof a.eventProperties&&s(n,a.eventProperties.call(t[a.pluginName],e))})),n},modifyOption:function(e,t,n){var a;return J.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"===typeof o.optionListeners[t]&&(a=o.optionListeners[t].call(e[o.pluginName],n))})),a}};function Q(e){var t=e.sortable,n=e.rootEl,a=e.name,o=e.targetEl,i=e.cloneEl,r=e.toEl,s=e.fromEl,c=e.oldIndex,d=e.newIndex,u=e.oldDraggableIndex,m=e.newDraggableIndex,h=e.originalEvent,g=e.putSortable,v=e.extraEventProperties;if(t=t||n&&n[V],t){var b,y=t.options,w="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||f||p?(b=document.createEvent("Event"),b.initEvent(a,!0,!0)):b=new CustomEvent(a,{bubbles:!0,cancelable:!0}),b.to=r||n,b.from=s||n,b.item=o||n,b.clone=i,b.oldIndex=c,b.newIndex=d,b.oldDraggableIndex=u,b.newDraggableIndex=m,b.originalEvent=h,b.pullMode=g?g.lastPutMode:void 0;var _=l({},v,G.getEventProperties(a,t));for(var C in _)b[C]=_[C];n&&n.dispatchEvent(b),y[w]&&y[w].call(t,b)}}var ee=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.evt,o=d(n,["evt"]);G.pluginEvent.bind(Ke)(e,t,l({dragEl:ne,parentEl:ae,ghostEl:oe,rootEl:ie,nextEl:re,lastDownEl:se,cloneEl:le,cloneHidden:ce,dragStarted:Ce,putSortable:he,activeSortable:Ke.active,originalEvent:a,oldIndex:de,oldDraggableIndex:me,newIndex:ue,newDraggableIndex:fe,hideGhostForTarget:He,unhideGhostForTarget:Xe,cloneNowHidden:function(){ce=!0},cloneNowShown:function(){ce=!1},dispatchSortableEvent:function(e){te({sortable:t,name:e,originalEvent:a})}},o))};function te(e){Q(l({putSortable:he,cloneEl:le,targetEl:ne,rootEl:ie,oldIndex:de,oldDraggableIndex:me,newIndex:ue,newDraggableIndex:fe},e))}var ne,ae,oe,ie,re,se,le,ce,de,ue,me,fe,pe,he,ge,ve,be,ye,we,_e,Ce,ke,Se,xe,Ie,De=!1,Ee=!1,Te=[],$e=!1,Pe=!1,ze=[],Oe=!1,Ne=[],Me="undefined"!==typeof document,Fe=v,Ae=p||f?"cssFloat":"float",Le=Me&&!b&&!v&&"draggable"in document.createElement("div"),je=function(){if(Me){if(f)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Re=function(e,t){var n=E(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=N(e,0,t),i=N(e,1,t),r=o&&E(o),s=i&&E(i),l=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+z(o).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+z(i).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&r["float"]&&"none"!==r["float"]){var d="left"===r["float"]?"left":"right";return!i||"both"!==s.clear&&s.clear!==d?"horizontal":"vertical"}return o&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||l>=a&&"none"===n[Ae]||i&&"none"===n[Ae]&&l+c>a)?"vertical":"horizontal"},qe=function(e,t,n){var a=n?e.left:e.top,o=n?e.right:e.bottom,i=n?e.width:e.height,r=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return a===r||o===s||a+i/2===r+l/2},Ue=function(e,t){var n;return Te.some((function(a){if(!M(a)){var o=z(a),i=a[V].options.emptyInsertThreshold,r=e>=o.left-i&&e<=o.right+i,s=t>=o.top-i&&t<=o.bottom+i;return i&&r&&s?n=a:void 0}})),n},Be=function(e){function t(e,n){return function(a,o,i,r){var s=a.options.group.name&&o.options.group.name&&a.options.group.name===o.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"===typeof e)return t(e(a,o,i,r),n)(a,o,i,r);var l=(n?a:o).options.group.name;return!0===e||"string"===typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},a=e.group;a&&"object"==i(a)||(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n},He=function(){!je&&oe&&E(oe,"display","none")},Xe=function(){!je&&oe&&E(oe,"display","")};Me&&document.addEventListener("click",(function(e){if(Ee)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Ee=!1,!1}),!0);var Ve=function(e){if(ne){e=e.touches?e.touches[0]:e;var t=Ue(e.clientX,e.clientY);if(t){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[V]._onDragOver(n)}}},Ye=function(e){ne&&ne.parentNode[V]._isOutsideThisEl(e.target)};function Ke(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=s({},t),e[V]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Re(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ke.supportPointer&&"PointerEvent"in window&&!g,emptyInsertThreshold:5};for(var a in G.initializePlugins(this,e,n),n)!(a in t)&&(t[a]=n[a]);for(var o in Be(t),this)"_"===o.charAt(0)&&"function"===typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&Le,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?w(e,"pointerdown",this._onTapStart):(w(e,"mousedown",this._onTapStart),w(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(w(e,"dragover",this),w(e,"dragenter",this)),Te.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),s(this,Y())}function We(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Je(e,t,n,a,o,i,r,s){var l,c,d=e[V],u=d.options.onMove;return!window.CustomEvent||f||p?(l=document.createEvent("Event"),l.initEvent("move",!0,!0)):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=a,l.related=o||t,l.relatedRect=i||z(t),l.willInsertAfter=s,l.originalEvent=r,e.dispatchEvent(l),u&&(c=u.call(d,l,r)),c}function Ze(e){e.draggable=!1}function Ge(){Oe=!1}function Qe(e,t,n){var a=z(M(n.el,n.options.draggable)),o=10;return t?e.clientX>a.right+o||e.clientX<=a.right&&e.clientY>a.bottom&&e.clientX>=a.left:e.clientX>a.right&&e.clientY>a.top||e.clientX<=a.right&&e.clientY>a.bottom+o}function et(e,t,n,a,o,i,r,s){var l=a?e.clientY:e.clientX,c=a?n.height:n.width,d=a?n.top:n.left,u=a?n.bottom:n.right,m=!1;if(!r)if(s&&xe<c*o){if(!$e&&(1===Se?l>d+c*i/2:l<u-c*i/2)&&($e=!0),$e)m=!0;else if(1===Se?l<d+xe:l>u-xe)return-Se}else if(l>d+c*(1-o)/2&&l<u-c*(1-o)/2)return tt(t);return m=m||r,m&&(l<d+c*i/2||l>u-c*i/2)?l>d+c/2?1:-1:0}function tt(e){return F(ne)<F(e)?1:-1}function nt(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;while(n--)a+=t.charCodeAt(n);return a.toString(36)}function at(e){Ne.length=0;var t=e.getElementsByTagName("input"),n=t.length;while(n--){var a=t[n];a.checked&&Ne.push(a)}}function ot(e){return setTimeout(e,0)}function it(e){return clearTimeout(e)}Ke.prototype={constructor:Ke,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ke=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,ne):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,a=this.options,o=a.preventOnFilter,i=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(r||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=a.filter;if(at(n),!ne&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||a.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!g||!s||"SELECT"!==s.tagName.toUpperCase())&&(s=S(s,a.draggable,n,!1),(!s||!s.animated)&&se!==s)){if(de=F(s),me=F(s,a.draggable),"function"===typeof c){if(c.call(this,e,s,this))return te({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),ee("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(a){if(a=S(l,a.trim(),n,!1),a)return te({sortable:t,rootEl:a,name:"filter",targetEl:s,fromEl:n,toEl:n}),ee("filter",t,{evt:e}),!0})),c))return void(o&&e.cancelable&&e.preventDefault());a.handle&&!S(l,a.handle,n,!1)||this._prepareDragStart(e,r,s)}}},_prepareDragStart:function(e,t,n){var a,o=this,i=o.el,r=o.options,s=i.ownerDocument;if(n&&!ne&&n.parentNode===i){var l=z(n);if(ie=i,ne=n,ae=ne.parentNode,re=ne.nextSibling,se=n,pe=r.group,Ke.dragged=ne,ge={target:ne,clientX:(t||e).clientX,clientY:(t||e).clientY},we=ge.clientX-l.left,_e=ge.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,ne.style["will-change"]="all",a=function(){ee("delayEnded",o,{evt:e}),Ke.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!h&&o.nativeDraggable&&(ne.draggable=!0),o._triggerDragStart(e,t),te({sortable:o,name:"choose",originalEvent:e}),D(ne,r.chosenClass,!0))},r.ignore.split(",").forEach((function(e){$(ne,e.trim(),Ze)})),w(s,"dragover",Ve),w(s,"mousemove",Ve),w(s,"touchmove",Ve),w(s,"mouseup",o._onDrop),w(s,"touchend",o._onDrop),w(s,"touchcancel",o._onDrop),h&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ne.draggable=!0),ee("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(p||f))a();else{if(Ke.eventCanceled)return void this._onDrop();w(s,"mouseup",o._disableDelayedDrag),w(s,"touchend",o._disableDelayedDrag),w(s,"touchcancel",o._disableDelayedDrag),w(s,"mousemove",o._delayedDragTouchMoveHandler),w(s,"touchmove",o._delayedDragTouchMoveHandler),r.supportPointer&&w(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(a,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ne&&Ze(ne),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;_(e,"mouseup",this._disableDelayedDrag),_(e,"touchend",this._disableDelayedDrag),_(e,"touchcancel",this._disableDelayedDrag),_(e,"mousemove",this._delayedDragTouchMoveHandler),_(e,"touchmove",this._delayedDragTouchMoveHandler),_(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?w(document,"pointermove",this._onTouchMove):w(document,t?"touchmove":"mousemove",this._onTouchMove):(w(ne,"dragend",this),w(ie,"dragstart",this._onDragStart));try{document.selection?ot((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(De=!1,ie&&ne){ee("dragStarted",this,{evt:t}),this.nativeDraggable&&w(document,"dragover",Ye);var n=this.options;!e&&D(ne,n.dragClass,!1),D(ne,n.ghostClass,!0),Ke.active=this,e&&this._appendGhost(),te({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ve){this._lastX=ve.clientX,this._lastY=ve.clientY,He();var e=document.elementFromPoint(ve.clientX,ve.clientY),t=e;while(e&&e.shadowRoot){if(e=e.shadowRoot.elementFromPoint(ve.clientX,ve.clientY),e===t)break;t=e}if(ne.parentNode[V]._isOutsideThisEl(e),t)do{if(t[V]){var n=void 0;if(n=t[V]._onDragOver({clientX:ve.clientX,clientY:ve.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Xe()}},_onTouchMove:function(e){if(ge){var t=this.options,n=t.fallbackTolerance,a=t.fallbackOffset,o=e.touches?e.touches[0]:e,i=oe&&T(oe,!0),r=oe&&i&&i.a,s=oe&&i&&i.d,l=Fe&&Ie&&A(Ie),c=(o.clientX-ge.clientX+a.x)/(r||1)+(l?l[0]-ze[0]:0)/(r||1),d=(o.clientY-ge.clientY+a.y)/(s||1)+(l?l[1]-ze[1]:0)/(s||1);if(!Ke.active&&!De){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(oe){i?(i.e+=c-(be||0),i.f+=d-(ye||0)):i={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");E(oe,"webkitTransform",u),E(oe,"mozTransform",u),E(oe,"msTransform",u),E(oe,"transform",u),be=c,ye=d,ve=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!oe){var e=this.options.fallbackOnBody?document.body:ie,t=z(ne,!0,Fe,!0,e),n=this.options;if(Fe){Ie=e;while("static"===E(Ie,"position")&&"none"===E(Ie,"transform")&&Ie!==document)Ie=Ie.parentNode;Ie!==document.body&&Ie!==document.documentElement?(Ie===document&&(Ie=P()),t.top+=Ie.scrollTop,t.left+=Ie.scrollLeft):Ie=P(),ze=A(Ie)}oe=ne.cloneNode(!0),D(oe,n.ghostClass,!1),D(oe,n.fallbackClass,!0),D(oe,n.dragClass,!0),E(oe,"transition",""),E(oe,"transform",""),E(oe,"box-sizing","border-box"),E(oe,"margin",0),E(oe,"top",t.top),E(oe,"left",t.left),E(oe,"width",t.width),E(oe,"height",t.height),E(oe,"opacity","0.8"),E(oe,"position",Fe?"absolute":"fixed"),E(oe,"zIndex","100000"),E(oe,"pointerEvents","none"),Ke.ghost=oe,e.appendChild(oe),E(oe,"transform-origin",we/parseInt(oe.style.width)*100+"% "+_e/parseInt(oe.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,a=e.dataTransfer,o=n.options;ee("dragStart",this,{evt:e}),Ke.eventCanceled?this._onDrop():(ee("setupClone",this),Ke.eventCanceled||(le=X(ne),le.draggable=!1,le.style["will-change"]="",this._hideClone(),D(le,this.options.chosenClass,!1),Ke.clone=le),n.cloneId=ot((function(){ee("clone",n),Ke.eventCanceled||(n.options.removeCloneOnHide||ie.insertBefore(le,ne),n._hideClone(),te({sortable:n,name:"clone"}))})),!t&&D(ne,o.dragClass,!0),t?(Ee=!0,n._loopId=setInterval(n._emulateDragOver,50)):(_(document,"mouseup",n._onDrop),_(document,"touchend",n._onDrop),_(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",o.setData&&o.setData.call(n,a,ne)),w(document,"drop",n),E(ne,"transform","translateZ(0)")),De=!0,n._dragStartId=ot(n._dragStarted.bind(n,t,e)),w(document,"selectstart",n),Ce=!0,g&&E(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,a,o,i=this.el,r=e.target,s=this.options,c=s.group,d=Ke.active,u=pe===c,m=s.sort,f=he||d,p=this,h=!1;if(!Oe){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),r=S(r,s.draggable,i,!0),N("dragOver"),Ke.eventCanceled)return h;if(ne.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return L(!1);if(Ee=!1,d&&!s.disabled&&(u?m||(a=!ie.contains(ne)):he===this||(this.lastPutMode=pe.checkPull(this,d,ne,e))&&c.checkPut(this,d,ne,e))){if(o="vertical"===this._getDirection(e,r),t=z(ne),N("dragOverValid"),Ke.eventCanceled)return h;if(a)return ae=ie,A(),this._hideClone(),N("revert"),Ke.eventCanceled||(re?ie.insertBefore(ne,re):ie.appendChild(ne)),L(!0);var g=M(i,s.draggable);if(!g||Qe(e,o,this)&&!g.animated){if(g===ne)return L(!1);if(g&&i===e.target&&(r=g),r&&(n=z(r)),!1!==Je(ie,i,ne,t,r,n,e,!!r))return A(),i.appendChild(ne),ae=i,j(),L(!0)}else if(r.parentNode===i){n=z(r);var v,b,y=0,w=ne.parentNode!==i,_=!qe(ne.animated&&ne.toRect||t,r.animated&&r.toRect||n,o),C=o?"top":"left",k=O(r,"top","top")||O(ne,"top","top"),x=k?k.scrollTop:void 0;if(ke!==r&&(v=n[C],$e=!1,Pe=!_&&s.invertSwap||w),y=et(e,r,n,o,_?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,Pe,ke===r),0!==y){var I=F(ne);do{I-=y,b=ae.children[I]}while(b&&("none"===E(b,"display")||b===oe))}if(0===y||b===r)return L(!1);ke=r,Se=y;var T=r.nextElementSibling,$=!1;$=1===y;var P=Je(ie,i,ne,t,r,n,e,$);if(!1!==P)return 1!==P&&-1!==P||($=1===P),Oe=!0,setTimeout(Ge,30),A(),$&&!T?i.appendChild(ne):r.parentNode.insertBefore(ne,$?T:r),k&&H(k,0,x-k.scrollTop),ae=ne.parentNode,void 0===v||Pe||(xe=Math.abs(v-z(r)[C])),j(),L(!0)}if(i.contains(ne))return L(!1)}return!1}function N(s,c){ee(s,p,l({evt:e,isOwner:u,axis:o?"vertical":"horizontal",revert:a,dragRect:t,targetRect:n,canSort:m,fromSortable:f,target:r,completed:L,onMove:function(n,a){return Je(ie,i,ne,t,n,z(n),e,a)},changed:j},c))}function A(){N("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function L(t){return N("dragOverCompleted",{insertion:t}),t&&(u?d._hideClone():d._showClone(p),p!==f&&(D(ne,he?he.options.ghostClass:d.options.ghostClass,!1),D(ne,s.ghostClass,!0)),he!==p&&p!==Ke.active?he=p:p===Ke.active&&he&&(he=null),f===p&&(p._ignoreWhileAnimating=r),p.animateAll((function(){N("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(r===ne&&!ne.animated||r===i&&!r.animated)&&(ke=null),s.dragoverBubble||e.rootEl||r===document||(ne.parentNode[V]._isOutsideThisEl(e.target),!t&&Ve(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function j(){ue=F(ne),fe=F(ne,s.draggable),te({sortable:p,name:"change",toEl:i,newIndex:ue,newDraggableIndex:fe,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){_(document,"mousemove",this._onTouchMove),_(document,"touchmove",this._onTouchMove),_(document,"pointermove",this._onTouchMove),_(document,"dragover",Ve),_(document,"mousemove",Ve),_(document,"touchmove",Ve)},_offUpEvents:function(){var e=this.el.ownerDocument;_(e,"mouseup",this._onDrop),_(e,"touchend",this._onDrop),_(e,"pointerup",this._onDrop),_(e,"touchcancel",this._onDrop),_(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;ue=F(ne),fe=F(ne,n.draggable),ee("drop",this,{evt:e}),ae=ne&&ne.parentNode,ue=F(ne),fe=F(ne,n.draggable),Ke.eventCanceled||(De=!1,Pe=!1,$e=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),it(this.cloneId),it(this._dragStartId),this.nativeDraggable&&(_(document,"drop",this),_(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),g&&E(document.body,"user-select",""),E(ne,"transform",""),e&&(Ce&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),oe&&oe.parentNode&&oe.parentNode.removeChild(oe),(ie===ae||he&&"clone"!==he.lastPutMode)&&le&&le.parentNode&&le.parentNode.removeChild(le),ne&&(this.nativeDraggable&&_(ne,"dragend",this),Ze(ne),ne.style["will-change"]="",Ce&&!De&&D(ne,he?he.options.ghostClass:this.options.ghostClass,!1),D(ne,this.options.chosenClass,!1),te({sortable:this,name:"unchoose",toEl:ae,newIndex:null,newDraggableIndex:null,originalEvent:e}),ie!==ae?(ue>=0&&(te({rootEl:ae,name:"add",toEl:ae,fromEl:ie,originalEvent:e}),te({sortable:this,name:"remove",toEl:ae,originalEvent:e}),te({rootEl:ae,name:"sort",toEl:ae,fromEl:ie,originalEvent:e}),te({sortable:this,name:"sort",toEl:ae,originalEvent:e})),he&&he.save()):ue!==de&&ue>=0&&(te({sortable:this,name:"update",toEl:ae,originalEvent:e}),te({sortable:this,name:"sort",toEl:ae,originalEvent:e})),Ke.active&&(null!=ue&&-1!==ue||(ue=de,fe=me),te({sortable:this,name:"end",toEl:ae,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){ee("nulling",this),ie=ne=ae=oe=re=le=se=ce=ge=ve=Ce=ue=fe=de=me=ke=Se=he=pe=Ke.dragged=Ke.ghost=Ke.clone=Ke.active=null,Ne.forEach((function(e){e.checked=!0})),Ne.length=be=ye=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ne&&(this._onDragOver(e),We(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e,t=[],n=this.el.children,a=0,o=n.length,i=this.options;a<o;a++)e=n[a],S(e,i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||nt(e));return t},sort:function(e,t){var n={},a=this.el;this.toArray().forEach((function(e,t){var o=a.children[t];S(o,this.options.draggable,a,!1)&&(n[e]=o)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(a.removeChild(n[e]),a.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return S(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var a=G.modifyOption(this,e,t);n[e]="undefined"!==typeof a?a:t,"group"===e&&Be(n)},destroy:function(){ee("destroy",this);var e=this.el;e[V]=null,_(e,"mousedown",this._onTapStart),_(e,"touchstart",this._onTapStart),_(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(_(e,"dragover",this),_(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Te.splice(Te.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ce){if(ee("hideClone",this),Ke.eventCanceled)return;E(le,"display","none"),this.options.removeCloneOnHide&&le.parentNode&&le.parentNode.removeChild(le),ce=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ce){if(ee("showClone",this),Ke.eventCanceled)return;ne.parentNode!=ie||this.options.group.revertClone?re?ie.insertBefore(le,re):ie.appendChild(le):ie.insertBefore(le,ne),this.options.group.revertClone&&this.animate(ne,le),E(le,"display",""),ce=!1}}else this._hideClone()}},Me&&w(document,"touchmove",(function(e){(Ke.active||De)&&e.cancelable&&e.preventDefault()})),Ke.utils={on:w,off:_,css:E,find:$,is:function(e,t){return!!S(e,t,e,!1)},extend:R,throttle:U,closest:S,toggleClass:D,clone:X,index:F,nextTick:ot,cancelNextTick:it,detectDirection:Re,getChild:N},Ke.get=function(e){return e[V]},Ke.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Ke.utils=l({},Ke.utils,e.utils)),G.mount(e)}))},Ke.create=function(e,t){return new Ke(e,t)},Ke.version=u;var rt,st,lt,ct,dt,ut,mt=[],ft=!1;function pt(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):this.options.supportPointer?w(document,"pointermove",this._handleFallbackAutoScroll):t.touches?w(document,"touchmove",this._handleFallbackAutoScroll):w(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?_(document,"dragover",this._handleAutoScroll):(_(document,"pointermove",this._handleFallbackAutoScroll),_(document,"touchmove",this._handleFallbackAutoScroll),_(document,"mousemove",this._handleFallbackAutoScroll)),gt(),ht(),B()},nulling:function(){dt=st=rt=ft=ut=lt=ct=null,mt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(a,o);if(dt=e,t||p||f||g){vt(e,this.options,i,t);var r=j(i,!0);!ft||ut&&a===lt&&o===ct||(ut&&gt(),ut=setInterval((function(){var i=j(document.elementFromPoint(a,o),!0);i!==r&&(r=i,ht()),vt(e,n.options,i,t)}),10),lt=a,ct=o)}else{if(!this.options.bubbleScroll||j(i,!0)===P())return void ht();vt(e,this.options,j(i,!1),!1)}}},s(e,{pluginName:"scroll",initializeByDefault:!0})}function ht(){mt.forEach((function(e){clearInterval(e.pid)})),mt=[]}function gt(){clearInterval(ut)}var vt=U((function(e,t,n,a){if(t.scroll){var o,i=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=P(),d=!1;st!==n&&(st=n,ht(),rt=t.scroll,o=t.scrollFn,!0===rt&&(rt=j(n,!0)));var u=0,m=rt;do{var f=m,p=z(f),h=p.top,g=p.bottom,v=p.left,b=p.right,y=p.width,w=p.height,_=void 0,C=void 0,k=f.scrollWidth,S=f.scrollHeight,x=E(f),I=f.scrollLeft,D=f.scrollTop;f===c?(_=y<k&&("auto"===x.overflowX||"scroll"===x.overflowX||"visible"===x.overflowX),C=w<S&&("auto"===x.overflowY||"scroll"===x.overflowY||"visible"===x.overflowY)):(_=y<k&&("auto"===x.overflowX||"scroll"===x.overflowX),C=w<S&&("auto"===x.overflowY||"scroll"===x.overflowY));var T=_&&(Math.abs(b-i)<=s&&I+y<k)-(Math.abs(v-i)<=s&&!!I),$=C&&(Math.abs(g-r)<=s&&D+w<S)-(Math.abs(h-r)<=s&&!!D);if(!mt[u])for(var O=0;O<=u;O++)mt[O]||(mt[O]={});mt[u].vx==T&&mt[u].vy==$&&mt[u].el===f||(mt[u].el=f,mt[u].vx=T,mt[u].vy=$,clearInterval(mt[u].pid),0==T&&0==$||(d=!0,mt[u].pid=setInterval(function(){a&&0===this.layer&&Ke.active._onTouchMove(dt);var t=mt[this.layer].vy?mt[this.layer].vy*l:0,n=mt[this.layer].vx?mt[this.layer].vx*l:0;"function"===typeof o&&"continue"!==o.call(Ke.dragged.parentNode[V],n,t,e,dt,mt[this.layer].el)||H(mt[this.layer].el,n,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&m!==c&&(m=j(m,!1)));ft=d}}),30),bt=function(e){var t=e.originalEvent,n=e.putSortable,a=e.dragEl,o=e.activeSortable,i=e.dispatchSortableEvent,r=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||o;r();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(d)&&(i("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function yt(){}function wt(){}yt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=N(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:bt},s(yt,{pluginName:"revertOnSpill"}),wt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,a=n||this.sortable;a.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),a.animateAll()},drop:bt},s(wt,{pluginName:"removeOnSpill"});Ke.mount(new pt),Ke.mount(wt,yt);var _t=Ke,Ct=n("4328"),kt=n.n(Ct),St=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.supportStrategy?n("div",[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{"element-loading-text":"保存并初始化中.",id:"siteForm",model:e.driveItem,rules:e.rules,"label-width":"auto","status-icon":!0}},[n("el-row",{staticClass:"box animate__animated animate__fadeIn",attrs:{gutter:50}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"驱动器名称",prop:"name"}},[n("el-input",{model:{value:e.driveItem.name,callback:function(t){e.$set(e.driveItem,"name",t)},expression:"driveItem.name"}})],1),n("el-form-item",{attrs:{label:"是否启用"}},[n("el-switch",{model:{value:e.driveItem.enable,callback:function(t){e.$set(e.driveItem,"enable",t)},expression:"driveItem.enable"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                            如不启用，则不在首页展示。\n                        ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{attrs:{label:"是否默认打开图片模式"}},[n("el-switch",{model:{value:e.driveItem.defaultSwitchToImgMode,callback:function(t){e.$set(e.driveItem,"defaultSwitchToImgMode",t)},expression:"driveItem.defaultSwitchToImgMode"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                            启用后，每次切换到此存储器，是否默认打开图片模式\n                        ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{attrs:{label:"开启缓存"}},[n("el-switch",{on:{change:e.cacheChange},model:{value:e.driveItem.enableCache,callback:function(t){e.$set(e.driveItem,"enableCache",t)},expression:"driveItem.enableCache"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                            开启缓存后，N 秒内重复请求相同文件夹，不会重复调用 API。\n                            "),n("br"),e._v("\n                            参数 N 在配置文件中设置 {zfile.cache.timeout}，默认为 1800 秒。\n                            "),n("br"),n("br"),e._v("\n                            注意：开启缓存后，可能会导致系统不稳定，如非必要或不了解缓存的，不建议开启此功能。\n                        ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{attrs:{label:"开启缓存自动刷新"}},[n("el-switch",{model:{value:e.driveItem.autoRefreshCache,callback:function(t){e.$set(e.driveItem,"autoRefreshCache",t)},expression:"driveItem.autoRefreshCache"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                            每隔 N 秒检测到期的缓存, 对于过期缓存尝试调用 API, 重新写入缓存.\n                            "),n("br"),e._v("\n                            参数 N 在配置文件中设置 {zfile.cache.auto-refresh-interval}，默认为 5 秒。\n                            "),n("br"),n("br"),e._v("\n                            注意：如您的数据，并非\n                        ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{attrs:{label:"存储策略",prop:"type"}},[n("el-select",{attrs:{filterable:"",placeholder:"请选择存储策略"},model:{value:e.driveItem.type,callback:function(t){e.$set(e.driveItem,"type",t)},expression:"driveItem.type"}},e._l(e.supportStrategy,(function(e){return n("el-option",{key:e.key,attrs:{label:e.description,value:e.key}})})),1)],1)],1),n("el-col",{attrs:{span:12}},[e._l(e.storageStrategyForm,(function(t){return"siteType"!==t.key?n("el-form-item",{key:t.title,attrs:{label:t.title,prop:"storageStrategyConfig."+t.key}},[n("el-col",{staticClass:"el-drive-form-col",attrs:{span:22}},["endPoint"===t.key&&e.region.hasOwnProperty(e.driveItem.type)?n("el-select",{model:{value:e.driveItem.storageStrategyConfig.endPoint,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"endPoint",t)},expression:"driveItem.storageStrategyConfig.endPoint"}},e._l(e.region[e.driveItem.type],(function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.val}})})),1):"pathStyle"===t.key?n("div",[n("el-select",{model:{value:e.driveItem.storageStrategyConfig.pathStyle,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"pathStyle",t)},expression:"driveItem.storageStrategyConfig.pathStyle"}},[n("el-option",{attrs:{label:"bucket-virtual-hosting",value:"bucket-virtual-hosting"}}),n("el-option",{attrs:{label:"path-style",value:"path-style"}})],1),n("el-link",{staticClass:"zfile-word-aux",attrs:{target:"_blank",icon:"el-icon-document",href:"https://docs.aws.amazon.com/zh_cn/AmazonS3/latest/dev/VirtualHosting.html#path-style-access"}},[e._v("查看 S3 API 说明文档")])],1):"isPrivate"===t.key?n("div",[n("el-switch",{model:{value:e.driveItem.storageStrategyConfig.isPrivate,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"isPrivate",t)},expression:"driveItem.storageStrategyConfig.isPrivate"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                    私有空间会生成带签名的下载链接\n                                ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):"siteName"!==t.key||"sharepoint"!==e.driveItem.type&&"sharepoint-china"!==e.driveItem.type?n("el-input",{attrs:{placeholder:""},on:{input:function(t){return e.change(t)}},model:{value:e.driveItem.storageStrategyConfig[t.key],callback:function(n){e.$set(e.driveItem.storageStrategyConfig,t.key,n)},expression:"driveItem.storageStrategyConfig[item.key]"}}):n("div",[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入站点名称"},model:{value:e.driveItem.storageStrategyConfig.siteName,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"siteName",t)},expression:"driveItem.storageStrategyConfig.siteName"}},[n("el-select",{staticClass:"zfile-site-id-input-site-type-select",attrs:{slot:"prepend"},on:{input:function(t){return e.change(t)}},slot:"prepend",model:{value:e.driveItem.storageStrategyConfig.siteType,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"siteType",t)},expression:"driveItem.storageStrategyConfig.siteType"}},[n("el-option",{attrs:{label:"/sites/",value:"/sites/"}}),n("el-option",{attrs:{label:"/teams/",value:"/teams/"}})],1)],1)],1)],1),"basePath"===t.key?n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                基路径表示从哪个路径开始文件, 不填写表示从根开始\n                            ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):e._e(),"filePath"===t.key?n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                Linux 或对象存储等需以 / 开头.\n                                "),n("br"),e._v("\n                                Windows 支持 C:/ 类的盘符开头.\n                                "),n("br"),e._v("\n                                结尾不需要加 "),n("b",[e._v("/")]),e._v(".\n                            ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):e._e(),"domain"===t.key&&"ftp"===e.driveItem.type?n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                此域名表示 http 访问域名，如有端口，也需要写明。\n                            ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):e._e(),"siteName"!==t.key||"sharepoint"!==e.driveItem.type&&"sharepoint-china"!==e.driveItem.type?e._e():n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                /sites/xxx 或 /teams/xxx ，xxx 为你的站点名称\n                            ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1),"siteId"!==t.key||"sharepoint"!==e.driveItem.type&&"sharepoint-china"!==e.driveItem.type?e._e():n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v('\n                                输入 "访问令牌" 和 "站点名称" 后，可以自动获取 SiteId。\n                                '),n("br"),e._v('\n                                如无法自动获取，请点击下方的 "前往获取 Site Id"。\n                            ')]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1)],1):e._e()})),"onedrive"===e.driveItem.type||"sharepoint"===e.driveItem.type?n("el-form-item",[n("el-link",{attrs:{target:"_blank",icon:"el-icon-link",href:e.$http.defaults.baseURL+"/onedrive/authorize"}},[e._v("前往获取令牌")]),n("br"),n("el-link",{directives:[{name:"show",rawName:"v-show",value:"sharepoint"===e.driveItem.type,expression:"driveItem.type === 'sharepoint'"}],attrs:{target:"_blank",icon:"el-icon-link",href:"/#/sharepoint-util"}},[e._v("前往获取 Site Id")])],1):e._e(),"onedrive-china"===e.driveItem.type||"sharepoint-china"===e.driveItem.type?n("el-form-item",[n("el-link",{attrs:{target:"_blank",icon:"el-icon-link",href:e.$http.defaults.baseURL+"/onedrive/china-authorize"}},[e._v("前往获取令牌")]),n("br"),n("el-link",{directives:[{name:"show",rawName:"v-show",value:"sharepoint-china"===e.driveItem.type,expression:"driveItem.type === 'sharepoint-china'"}],attrs:{target:"_blank",icon:"el-icon-link",href:"/#/sharepoint-util"}},[e._v("前往获取 Site Id")])],1):e._e(),"ftp"===e.driveItem.type?n("el-form-item",[n("div",{staticClass:"zfile-word-aux zfile-margin-left-unset"},[e._v("\n                        注意: FTP 协议，如果不填写加速域名 (HTTP 下载地址)，则会使用 FTP 协议进行下载\n                        "),n("br"),e._v("\n                        FTP 协议会在 URL 中暴露用户名密码，如："),n("b",[e._v("ftp://用户名:密码@IP:端口/文件路径/文件名")]),n("br"),e._v("\n                        如为 FTP 提供了加速域名 (HTTP 下载地址)，则会使用 HTTP 协议，如："),n("b",[e._v("http(s)://加速域名/文件路径/文件名")])])]):e._e()],2)],1)],1),n("div",{staticClass:"zfile-text-align-center",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",disabled:e.loading},on:{click:function(t){return e.submitForm("form")}}},[e._v("保 存")]),n("el-button",{on:{click:e.close}},[e._v("取 消")])],1)],1):e._e()},xt=[],It={aliyun:[{name:"华东 1（杭州）",val:"oss-cn-hangzhou.aliyuncs.com"},{name:"华东 2（上海）",val:"oss-cn-shanghai.aliyuncs.com"},{name:"华北 1（青岛）",val:"oss-cn-qingdao.aliyuncs.com"},{name:"华北 2（北京）",val:"oss-cn-beijing.aliyuncs.com"},{name:"华北 3（张家口）",val:"oss-cn-zhangjiakou.aliyuncs.com"},{name:"华北 5（呼和浩特）",val:"oss-cn-huhehaote.aliyuncs.com"},{name:"华南 1（深圳）",val:"oss-cn-shenzhen.aliyuncs.com"},{name:"西南 1（成都）",val:"oss-cn-chengdu.aliyuncs.com"},{name:"中国（香港）",val:"oss-cn-hongkong.aliyuncs.com"},{name:"美国西部 1 （硅谷）",val:"oss-us-west-1.aliyuncs.com"},{name:"美国东部 1 （弗吉尼亚）",val:"oss-us-east-1.aliyuncs.com"},{name:"亚太东南 1 （新加坡）",val:"oss-ap-southeast-1.aliyuncs.com"},{name:"亚太东南 2 （悉尼）",val:"oss-ap-southeast-2.aliyuncs.com"},{name:"亚太东南 3 （吉隆坡）",val:"oss-ap-southeast-3.aliyuncs.com"},{name:"亚太东南 5 （雅加达）",val:"oss-ap-southeast-5.aliyuncs.com"},{name:"亚太东北 1 （日本）",val:"oss-ap-northeast-1.aliyuncs.com"},{name:"亚太南部 1 （孟买）",val:"oss-ap-south-1.aliyuncs.com"},{name:"欧洲中部 1 （法兰克福）",val:"oss-eu-central-1.aliyuncs.com"},{name:"英国（伦敦）",val:"oss-eu-west-1.aliyuncs.com"},{name:"中东东部 1 （迪拜）",val:"oss-me-east-1.aliyuncs.com"}],tencent:[{name:"北京",val:"cos.ap-beijing.myqcloud.com"},{name:"上海",val:"cos.ap-shanghai.myqcloud.com"},{name:"广州",val:"cos.ap-guangzhou.myqcloud.com"},{name:"成都",val:"cos.ap-chengdu.myqcloud.com"},{name:"重庆",val:"cos.ap-chongqing.myqcloud.com"},{name:"深圳金融",val:"cos.ap-shenzhen-fsi.myqcloud.com"},{name:"上海金融",val:"cos.ap-shanghai-fsi.myqcloud.com"},{name:"北京金融",val:"cos.ap-beijing-fsi.myqcloud.com"},{name:"中国香港",val:"cos.ap-hongkong.myqcloud.com"},{name:"新加坡",val:"cos.ap-singapore.myqcloud.com"},{name:"孟买",val:"cos.ap-mumbai.myqcloud.com"},{name:"首尔",val:"cos.ap-seoul.myqcloud.com"},{name:"曼谷",val:"cos.ap-bangkok.myqcloud.com"},{name:"东京",val:"cos.ap-tokyo.myqcloud.com"},{name:"硅谷",val:"cos.na-siliconvalley.myqcloud.com"},{name:"弗吉尼亚",val:"cos.na-ashburn.myqcloud.com"},{name:"多伦多",val:"cos.na-toronto.myqcloud.com"},{name:"法兰克福",val:"cos.eu-frankfurt.myqcloud.com"},{name:"莫斯科",val:"cos.eu-moscow"}],huawei:[{name:"非洲-约翰内斯堡",val:"obs.af-south-1.myhuaweicloud.com"},{name:"华北-北京四",val:"obs.cn-north-4.myhuaweicloud.com"},{name:"华北-北京一",val:"obs.cn-north-1.myhuaweicloud.com"},{name:"华东-上海二",val:"obs.cn-east-2.myhuaweicloud.com"},{name:"华东-上海一",val:"obs.cn-east-3.myhuaweicloud.com"},{name:"华南-广州",val:"obs.cn-south-1.myhuaweicloud.com"},{name:"西南-贵阳一",val:"obs.cn-southwest-2.myhuaweicloud.com"},{name:"亚太-曼谷",val:"obs.ap-southeast-2.myhuaweicloud.com"},{name:"亚太-香港",val:"obs.ap-southeast-1.myhuaweicloud.com"},{name:"亚太-新加坡",val:"obs.ap-southeast-3.myhuaweicloud.com"}],qiniu:[{name:"华东",val:"s3-cn-east-1.qiniucs.com"},{name:"华北",val:"s3-cn-north-1.qiniucs.com"},{name:"华南",val:"s3-cn-south-1.qiniucs.com"},{name:"北美",val:"s3-us-north-1.qiniucs.com"},{name:"东南亚",val:"s3-ap-southeast-1.qiniucs.com"}]},Dt=It,Et={name:"DriveEdit",props:{close:{type:Function},driveItem:{orderNum:null,name:"",type:null,searchEnable:!1,searchIgnoreCase:!1,searchContainEncryptedFile:!1,enableCache:!1,autoRefreshCache:!1,storageStrategyConfig:{endPoint:"",pathStyle:"",isPrivate:!1,accessKey:null,secretKey:null,bucketName:null,host:null,port:null,filePath:null,accessToken:null,refreshToken:null,secretId:null,username:null,password:null,basePath:"",domain:"",siteType:"/sites/",siteId:""}},supportStrategy:null},watch:{"driveItem.type":function(e){e?this.loadStrategyForm(e):this.storageStrategyForm=null},"driveItem.storageStrategyConfig.siteName":function(){var e=this;if(this.driveItem.storageStrategyConfig.siteName&&this.driveItem.storageStrategyConfig.accessToken){var t={type:"sharepoint"===this.driveItem.type?"Standard":"China",accessToken:this.driveItem.storageStrategyConfig.accessToken,siteType:this.driveItem.storageStrategyConfig.siteType,siteName:this.driveItem.storageStrategyConfig.siteName};this.$http.post("/sharepoint/getSiteId",t).then((function(t){t.data.code===e.common.responseCode.SUCCESS&&(e.driveItem.storageStrategyConfig.siteId=t.data.data,e.$forceUpdate(),e.$message.success("自动获取 SiteId 成功"))}))}}},data:function(){var e=this;return{region:Dt,loading:!1,storageStrategyForm:[],rules:{siteName:[{required:!0,message:"请输入站点名称",trigger:"change"}],username:[{required:!0,message:"请输入管理员账号",trigger:"change"}],password:[{required:!0,message:"请输入管理员密码",trigger:"change"}],domain:[{required:!0,type:"url",message:"请输入正确的域名，需以 http:// 或 https:// 开头",trigger:"change"}],type:[{required:!0,message:"存储策略不能为空",trigger:"change"}],"storageStrategyConfig.domain":[{validator:function(t,n,a){var o=/(http|https):\/\/([\w.]+\/?)\S*/;void 0!==n&&""!==n||"ftp"!==e.driveItem.type?void 0!==n&&""!==n?o.test(n)?n.lastIndexOf("/")===n.length-1?a(new Error("请输入正确的域名，不能以 / 结尾")):a():a(new Error("请输入正确的域名，需以 http:// 或 https:// 开头")):a(new Error("域名不能为空")):a()},type:"url",trigger:"change"}],"storageStrategyConfig.username":[{validator:function(t,n,a){"upyun"!==e.driveItem.type&&"ufile"!==e.driveItem.type||void 0!==n&&""!==n?a():a(new Error("操作员名称不能为空"))}}],"storageStrategyConfig.password":[{validator:function(t,n,a){"upyun"!==e.driveItem.type&&"ufile"!==e.driveItem.type||void 0!==n&&""!==n?a():a(new Error("操作员密码不能为空"))}}],"storageStrategyConfig.endPoint":[{required:!0,message:"区域不能为空"}],"storageStrategyConfig.accessKey":[{required:!0,message:"AccessKey 不能为空"}],"storageStrategyConfig.filePath":[{required:!0,message:"文件路径不能为空"}],"storageStrategyConfig.secretKey":[{required:!0,message:"SecretKey 不能为空"}],"storageStrategyConfig.bucketName":[{required:!0,message:"此项不能为空"}],"storageStrategyConfig.host":[{required:!0,message:"域名或 IP 不能为空"}],"storageStrategyConfig.port":[{required:!0,message:"端口不能为空"}],"storageStrategyConfig.accessToken":[{required:!0,message:"访问令牌不能为空"}],"storageStrategyConfig.refreshToken":[{required:!0,message:"刷新令牌不能为空"}],"storageStrategyConfig.secretId":[{required:!0,message:"SecretId 不能为空"}],"storageStrategyConfig.siteId":[{required:!0,message:"SiteId 不能为空"}]}}},methods:{cacheChange:function(e){e||(this.driveItem.autoRefreshCache=!1)},loadStrategyForm:function(e){var t=this;this.$http.get("admin/strategy-form",{params:{storageType:e}}).then((function(n){t.storageStrategyForm=n.data.data,"sharepoint"!==e&&"sharepoint-china"!==e||(t.driveItem.storageStrategyConfig.siteType="/sites/")}))},change:function(){this.$forceUpdate()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0,t.$http.post("admin/drive",t.driveItem).then((function(e){var n=e.data;t.$message({message:n.msg,type:0===n.code?"success":"error",duration:1500}),t.close(),t.loading=!1})).catch((function(){t.loading=!1}))}))}},mounted:function(){this.driveItem.type&&this.loadStrategyForm(this.driveItem.type)}},Tt=Et,$t=(n("8d57"),n("2877")),Pt=Object($t["a"])(Tt,St,xt,!1,null,"6669110c",null),zt=Pt.exports,Ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",{staticClass:"zfile-cache-statistics",attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"always"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"card-title"},[e._v("缓存数")]),n("el-button",{staticClass:"zfile-float-right",attrs:{size:"mini",icon:"el-icon-delete",round:"",type:"danger"},on:{click:e.clearCache}},[e._v("清理缓存")])],1),n("div",{staticClass:"card-content",domProps:{textContent:e._s(e.driveCacheInfo.cacheCount)}})])],1),n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"always"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"card-title"},[e._v("命中数")])]),n("div",{staticClass:"card-content",domProps:{textContent:e._s(e.driveCacheInfo.hitCount)}})])],1),n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"always"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"card-title"},[e._v("未命中数")])]),n("div",{staticClass:"card-content",domProps:{textContent:e._s(e.driveCacheInfo.missCount)}})])],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:20}},[n("el-input",{attrs:{placeholder:"输入关键字搜索"},model:{value:e.cacheSearch,callback:function(t){e.cacheSearch=t},expression:"cacheSearch"}})],1),n("el-col",{attrs:{span:4}},[n("el-button",{staticClass:"zfile-float-right",attrs:{size:"small",type:"primary",icon:"el-icon-refresh"},on:{click:e.refreshCacheManageData}},[e._v("刷新统计信息")])],1)],1),n("el-table",{staticClass:"zfile-cache-table",attrs:{height:"50vh",data:e.driveCacheInfo.cacheKeys.filter((function(t){return!e.cacheSearch||t.name.toLowerCase().includes(e.cacheSearch.toLowerCase())}))}},[n("el-table-column",{attrs:{prop:"name",label:"缓存 Key (文件夹名称)","min-width":"75%"}}),n("el-table-column",{attrs:{"min-width":"25%",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary",round:""},on:{click:function(n){return e.refreshCache(t.row)}}},[e._v("刷新缓存")])]}}])})],1)],1)},Nt=[],Mt=(n("55dd"),n("7f7f"),{name:"CacheManager",props:{currentCacheManageId:null},data:function(){return{cacheSearch:"",driveCacheInfo:{cacheCount:0,hitCount:0,missCount:0,cacheKeys:[]}}},methods:{refreshCache:function(e){var t=this;this.$http.post("admin/cache/".concat(this.currentCacheManageId,"/refresh"),kt.a.stringify({key:e.name})).then((function(){t.$message({message:"刷新成功",type:"success"})}))},refreshCacheManageData:function(){this.loadCacheManageData(),this.$message({message:"刷新成功",type:"success"})},loadCacheManageData:function(){var e=this;this.$http.get("admin/cache/".concat(this.currentCacheManageId,"/info")).then((function(t){var n=t.data.data,a=n.cacheKeys;a.sort((function(e,t){return e.length-t.length}));for(var o=[],i=0;i<a.length;i++)o[i]={name:a[i]};n.cacheKeys=o,e.driveCacheInfo=n}))},clearCache:function(){var e=this;this.$http.post("admin/cache/".concat(this.currentCacheManageId,"/clear")).then((function(){e.loadCacheManageData(),e.$message({message:"清理成功",type:"success"})}))}},beforeMount:function(){this.loadCacheManageData()}}),Ft=Mt,At=(n("3823"),Object($t["a"])(Ft,Ot,Nt,!1,null,"f4e53df0",null)),Lt=At.exports,jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"filterForm",attrs:{id:"filterForm",model:e.filterForm,"label-width":"120px"}},[e._l(e.filterForm.filterList,(function(t,a){return n("div",{key:a},[n("el-row",[n("el-col",{attrs:{span:20}},[n("el-form-item",{attrs:{prop:"filterList."+a+".expression",rules:{required:!0,message:"此项不能为空",trigger:"blur"},label:"表达式 "+(a+1)}},[n("el-input",{attrs:{size:"small"},model:{value:t.expression,callback:function(n){e.$set(t,"expression",n)},expression:"item.expression"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-button",{staticClass:"zfile-filter-delete-btn",attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(t){return e.deleteFilterItem(a)}}},[e._v("删除\n                    ")])],1)],1)],1)})),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addFilterItem}},[e._v("添加更多")])],1),n("el-form-item",[n("span",{staticClass:"zfile-word-aux zfile-margin-left-unset"},[e._v("\n                    表达式规则:\n                    "),n("br"),e._v("\n                    *: 单级路径通配符，如表达式 /*.jpg，可以匹配根路径下所有的 jpg 后缀的文件\n                    "),n("br"),e._v("\n                    **: 多级路径通配符，如表达式 **.jpg，可以匹配所有路径下的 jpg 后缀的文件\n                    "),n("br"),e._v("\n                    注意："),n("b",[e._v("/a.png")]),e._v(" 表示根路径下的 a.png。 "),n("b",[e._v("/a/b/c.png")]),e._v("，表示 /a/b/ 路径下的 c.png。 "),n("b",[e._v("a.png")]),e._v("，什么都不表示，因为未标注路径。\n                ")])])],2),n("div",{staticClass:"zfile-filter-save-btn",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-check"},on:{click:e.saveFilterForm}},[e._v("保存")])],1)],1)},Rt=[],qt={name:"FilterPattern",props:{close:{type:Function},driveId:null},data:function(){return{filterForm:{filterList:[]}}},methods:{loadFilterData:function(){var e=this;this.$http.get("admin/drive/".concat(this.driveId,"/filters")).then((function(t){e.filterForm.filterList=t.data.data}))},addFilterItem:function(){this.filterForm.filterList.push({expression:"",driveId:this.driveId})},deleteFilterItem:function(e){this.filterForm.filterList.splice(e,1)},saveFilterForm:function(){var e=this;this.$http.post("admin/drive/".concat(this.driveId,"/filters"),this.filterForm.filterList).then((function(){e.$message({message:"保存成功",type:"success"}),e.close()}))}},mounted:function(){this.loadFilterData()}},Ut=qt,Bt=(n("066d"),Object($t["a"])(Ut,jt,Rt,!1,null,"e3077b30",null)),Ht=Bt.exports,Xt={name:"DriveList",components:{FilterPattern:Ht,CacheManager:Lt,DriveEdit:zt},data:function(){return{loading:!1,driveList:[],supportStrategy:[],driveItem:{orderNum:null,name:"",type:null,enable:!0,defaultSwitchToImgMode:!1,searchEnable:!1,searchIgnoreCase:!1,searchContainEncryptedFile:!1,enableCache:!1,autoRefreshCache:!1,storageStrategyConfig:{endPoint:"",pathStyle:"",isPrivate:!1,accessKey:null,secretKey:null,bucketName:null,host:null,port:null,filePath:null,accessToken:null,refreshToken:null,secretId:null,username:null,password:null,basePath:"",domain:""}},sortable:null,driveEditDialogVisible:!1,filterDialogVisible:!1,cacheManageVisible:!1,currentCacheManageId:null}},methods:{editDriveId:function(e){var t=this;this.$prompt("请输入要修改为的 ID，需为大于零的整数。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[1-9]\d{0,9}$/,inputErrorMessage:"ID 只能为大于零的整数，最大支持 9 位数字。"}).then((function(n){var a=n.value;t.$http.post("admin/drive/updateId",kt.a.stringify({updateId:e,newId:a})).then((function(){t.$message({message:"修改成功",type:"success"}),t.init()}))}))},setSort:function(){var e=this,t=document.querySelector(".el-table__body-wrapper tbody");_t.create(t,{onEnd:function(t){if(t.oldIndex!==t.newIndex){var n=e.driveList.splice(t.oldIndex,1)[0];e.driveList.splice(t.newIndex,0,n),e.$http.post("admin/drive/drag",e.driveList).then((function(){e.$message({message:"调整排序成功",type:"success"})}))}}})},clearCache:function(){var e=this;this.$http.post("admin/cache/".concat(this.currentCacheManageId,"/clear")).then((function(){e.loadCacheManageData(),e.$message({message:"清理成功",type:"success"})}))},cacheManage:function(e){this.currentCacheManageId=e.id,this.cacheManageVisible=!0},showFilterDialog:function(e){this.currentCacheManageId=e.id,this.filterDialogVisible=!0},switchEnableStatus:function(e){var t=this,n=e.enable?"enable":"disable";this.$http.post("admin/drive/"+e.id+"/"+n).then((function(){t.$message.success("修改成功")}))},switchCacheEnableStatus:function(e){var t=this,n=e.enableCache?"enable":"disable";this.$http.post("admin/cache/"+e.id+"/"+n).then((function(){t.$message.success("修改成功")}))},switchAutoRefreshStatus:function(e){var t=this,n=e.autoRefreshCache?"start":"stop";this.$http.post("admin/cache/"+e.id+"/auto-refresh/"+n).then((function(){t.$message.success("修改成功")}))},typeFormatter:function(e,t,n){for(var a in this.supportStrategy)if(this.supportStrategy[a].key===n)return this.supportStrategy[a].description},editDrive:function(e){var t=this;this.$http.get("admin/drive/"+e.id).then((function(e){var n=e.data.data;n.type=n.type.key,t.driveItem=n,t.driveEditDialogVisible=!0}))},deleteDrive:function(e){var t=this;this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(n){"confirm"===n&&t.$http.delete("admin/drive/"+e.id).then((function(e){e.data.code===t.common.responseCode.SUCCESS?(t.$message.success("删除成功"),t.init()):t.$message.success("删除失败")}))}})},closeDriveEdit:function(){this.driveEditDialogVisible=!1,this.init()},closeFilterDialog:function(){this.filterDialogVisible=!1},addDrive:function(){Object.assign(this.driveItem,this.$options.data().driveItem),this.driveItem.id=null,this.driveEditDialogVisible=!0,console.log(this.supportStrategy)},init:function(){var e=this;this.$http.get("admin/support-strategy").then((function(t){e.supportStrategy=t.data.data})),this.$http.get("admin/drives").then((function(t){var n=t.data.data;for(var a in n)n[a].type=n[a].type.key;e.driveList=t.data.data}))}},mounted:function(){this.init(),this.setSort()}},Vt=Xt,Yt=(n("9a9b"),Object($t["a"])(Vt,a,o,!1,null,"4162da7e",null));t["default"]=Yt.exports},"8d57":function(e,t,n){"use strict";n("2aeb1")},"95db":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{attrs:{shadow:"false"}},[n("markdown-render",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"scroll",attrs:{"element-loading-text":"拼命加载中",text:e.md}})],1)},o=[],i=n("f786"),r={name:"API",components:{MarkdownRender:i["a"]},data:function(){return{loading:!0,md:""}},mounted:function(){var e=this,t="https://c.jun6.net/ZFILE/ZFILE API.md";this.$http.get(t,{withCredentials:!1}).then((function(t){e.loading=!1,e.md=t.data})).catch((function(){e.$http.get("common/content",{params:{url:t}}).then((function(t){e.loading=!1,e.md=t.data.data}))}))}},s=r,l=(n("432e"),n("2877")),c=Object(l["a"])(s,a,o,!1,null,"fad21930",null);t["default"]=c.exports},"9a9b":function(e,t,n){"use strict";n("fde3")},"9e31":function(e,t,n){},"9e6a":function(e,t,n){"use strict";var a=n("d233"),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:a.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},r=function(e,t){for(var n={},a=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,r=t.parameterLimit===1/0?void 0:t.parameterLimit,s=a.split(t.delimiter,r),l=0;l<s.length;++l){var c,d,u=s[l],m=u.indexOf("]="),f=-1===m?u.indexOf("="):m+1;-1===f?(c=t.decoder(u,i.decoder),d=t.strictNullHandling?null:""):(c=t.decoder(u.slice(0,f),i.decoder),d=t.decoder(u.slice(f+1),i.decoder)),o.call(n,c)?n[c]=[].concat(n[c]).concat(d):n[c]=d}return n},s=function(e,t,n){for(var a=t,o=e.length-1;o>=0;--o){var i,r=e[o];if("[]"===r)i=[],i=i.concat(a);else{i=n.plainObjects?Object.create(null):{};var s="["===r.charAt(0)&&"]"===r.charAt(r.length-1)?r.slice(1,-1):r,l=parseInt(s,10);!isNaN(l)&&r!==s&&String(l)===s&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(i=[],i[l]=a):i[s]=a}a=i}return a},l=function(e,t,n){if(e){var a=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/,r=/(\[[^[\]]*])/g,l=i.exec(a),c=l?a.slice(0,l.index):a,d=[];if(c){if(!n.plainObjects&&o.call(Object.prototype,c)&&!n.allowPrototypes)return;d.push(c)}var u=0;while(null!==(l=r.exec(a))&&u<n.depth){if(u+=1,!n.plainObjects&&o.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;d.push(l[1])}return l&&d.push("["+a.slice(l.index)+"]"),s(d,t,n)}};e.exports=function(e,t){var n=t?a.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!==typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"===typeof n.delimiter||a.isRegExp(n.delimiter)?n.delimiter:i.delimiter,n.depth="number"===typeof n.depth?n.depth:i.depth,n.arrayLimit="number"===typeof n.arrayLimit?n.arrayLimit:i.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"===typeof n.decoder?n.decoder:i.decoder,n.allowDots="boolean"===typeof n.allowDots?n.allowDots:i.allowDots,n.plainObjects="boolean"===typeof n.plainObjects?n.plainObjects:i.plainObjects,n.allowPrototypes="boolean"===typeof n.allowPrototypes?n.allowPrototypes:i.allowPrototypes,n.parameterLimit="number"===typeof n.parameterLimit?n.parameterLimit:i.parameterLimit,n.strictNullHandling="boolean"===typeof n.strictNullHandling?n.strictNullHandling:i.strictNullHandling,""===e||null===e||"undefined"===typeof e)return n.plainObjects?Object.create(null):{};for(var o="string"===typeof e?r(e,n):e,s=n.plainObjects?Object.create(null):{},c=Object.keys(o),d=0;d<c.length;++d){var u=c[d],m=l(u,o[u],n);s=a.merge(s,m,n)}return a.compact(s)}},adf4:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"zfile-admin-index"},[n("div",{staticClass:"zfile-admin-top"},[n("div",{staticClass:"zfile-admin-top-content"},[n("div",{staticClass:"zfile-admin-top-logo box animate__animated animate__fadeInLeft"},[n("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover"}},[e.latestInfo?n("div",{staticClass:"zfile-admin-index-version-info"},[n("div",{domProps:{innerHTML:e._s("最新版：v"+e.latestInfo.tag_name)}}),n("div",{domProps:{innerHTML:e._s("发布时间: "+e.common.dateFormat(e.latestInfo.published_at))}}),n("br"),e._v("\n\n                        文档地址："),n("el-link",{staticClass:"zfile-word-aux zfile-margin-left-unset",attrs:{href:"http://docs.zhaojun.im/zfile",target:"_blank"}},[e._v("点击进入")]),n("br"),e._v("\n                        后端源码地址："),n("el-link",{staticClass:"zfile-word-aux zfile-margin-left-unset",attrs:{href:"https://github.com/zhaojun1998/zfile",target:"_blank"}},[e._v("点击进入")]),n("br"),e._v("\n                        前端源码地址："),n("el-link",{staticClass:"zfile-word-aux zfile-margin-left-unset",attrs:{href:"https://github.com/zhaojun1998/zfile-vue",target:"_blank"}},[e._v("点击进入")])],1):e._e(),n("div",{attrs:{slot:"reference"},domProps:{innerHTML:e._s("ZFile Admin v"+e.common.version)},on:{click:e.openZFileAdmin},slot:"reference"})])],1),n("el-menu",{staticClass:"zfile-admin-menu box animate__animated animate__fadeInDown",attrs:{mode:"horizontal","background-color":"#001529","text-color":"hsla(0,0%,100%,.65)","active-text-color":"#fff","default-active":"/admin"!==this.$route.path?this.$route.path:"/admin/site",router:!0},on:{select:e.rebuildTitle}},[n("el-menu-item",{attrs:{index:"/admin/site"}},[n("i",{staticClass:"el-icon-setting"}),n("span",{attrs:{slot:"title",id:"/admin/site"},slot:"title"},[e._v("基本设置")])]),n("el-menu-item",{attrs:{index:"/admin/drive-list"}},[n("i",{staticClass:"el-icon-folder-opened"}),n("span",{attrs:{slot:"title",id:"/admin/drive-list"},slot:"title"},[e._v("驱动器列表")])]),n("el-menu-item",{attrs:{index:"/admin/view"}},[n("i",{staticClass:"el-icon-view"}),n("span",{attrs:{slot:"title",id:"/admin/view"},slot:"title"},[e._v("显示设置")])]),n("el-menu-item",{attrs:{index:"/admin/password"}},[n("i",{staticClass:"el-icon-key"}),n("span",{attrs:{slot:"title",id:"/admin/password"},slot:"title"},[e._v("修改密码")])]),n("el-menu-item",{attrs:{index:"/admin/short-link"}},[n("i",{staticClass:"el-icon-link"}),n("span",{attrs:{slot:"title",id:"/admin/short-link"},slot:"title"},[e._v("短链管理")])]),n("el-menu-item",{on:{click:e.logDownload}},[n("i",{staticClass:"el-icon-download"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("日志下载")])]),n("el-menu-item",{on:{click:e.click}},[n("i",{staticClass:"el-icon-s-home"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("前往首页")])]),n("el-menu-item",{on:{click:e.logout}},[n("i",{staticClass:"el-icon-switch-button"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("注销")])])],1)],1)]),n("div",{staticClass:"zfile-admin-content"},[n("keep-alive",{attrs:{exclude:"CacheManager,SiteSetting"}},[n("router-view",{staticClass:"zfile-admin-content-view box animate__animated animate__fadeIn"})],1)],1)])},o=[],i={name:"Index",data:function(){return{latestInfo:{},active:"/admin/site"}},methods:{logout:function(){var e=this;this.$http.get("logout").then((function(){e.$router.push("/login")}))},rebuildTitle:function(e){document.title=document.getElementById(e).innerText+" | 后台管理"},logDownload:function(){window.open(this.$http.defaults.baseURL+"/admin/log","_blank")},click:function(){window.open("/","_blank")},openZFileAdmin:function(){window.open("https://github.com/zhaojun1998/zfile")}},mounted:function(){var e=this,t=document.getElementsByClassName("is-active")[0].getElementsByTagName("span")[0].id;this.rebuildTitle(t),this.$http.get("https://api.github.com/repos/zhaojun1998/zfile/releases/latest",{withCredentials:!1,showMessage:!1}).then((function(t){e.latestInfo=t.data}))}},r=i,s=(n("bfe1"),n("2877")),l=Object(s["a"])(r,a,o,!1,null,"158be3bf",null);t["default"]=l.exports},ae0e:function(e,t,n){},b0ca:function(e,t,n){},b313:function(e,t,n){"use strict";var a=String.prototype.replace,o=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return a.call(e,o,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},b611:function(e,t,n){},b8a6:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{attrs:{shadow:"false"}},[n("el-form",{ref:"form",attrs:{id:"pwdForm",rules:e.rules,model:e.form,"label-width":"auto","status-icon":!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("form")}}},[n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"管理员账号",prop:"username"}},[n("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username","string"===typeof t?t.trim():t)},expression:"form.username"}})],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"设置新密码",prop:"password"}},[n("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}})],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"确认密码",prop:"repassword"}},[n("el-input",{model:{value:e.form.repassword,callback:function(t){e.$set(e.form,"repassword","string"===typeof t?t.trim():t)},expression:"form.repassword"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确认")])],1)],1)],1)},o=[],i=n("4328"),r=n.n(i),s={name:"UpdatePassword",data:function(){var e=this;return{form:{username:"",password:"",repassword:""},rules:{username:[{required:!0,message:"请输入管理员账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],repassword:[{required:!0,validator:function(t,n,a){""===n?a(new Error("请再次输入密码")):n!==e.form.password?a(new Error("两次输入密码不一致!")):a()},trigger:"change"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$http.post("admin/update-pwd",r.a.stringify(t.form)).then((function(e){e.data.code===t.common.responseCode.SUCCESS&&t.$message({message:"保存成功",type:"success"})}))}))}},mounted:function(){var e=this;this.$http.get("admin/config").then((function(t){e.form=t.data.data}))}},l=s,c=n("2877"),d=Object(c["a"])(l,a,o,!1,null,"2ac5b19c",null);t["default"]=d.exports},bfe1:function(e,t,n){"use strict";n("6dde")},d233:function(e,t,n){"use strict";var a=Object.prototype.hasOwnProperty,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),i=function(e){var t;while(e.length){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var a=[],o=0;o<t.length;++o)"undefined"!==typeof t[o]&&a.push(t[o]);n.obj[n.prop]=a}}return t},r=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},a=0;a<e.length;++a)"undefined"!==typeof e[a]&&(n[a]=e[a]);return n},s=function e(t,n,o){if(!n)return t;if("object"!==typeof n){if(Array.isArray(t))t.push(n);else{if("object"!==typeof t)return[t,n];(o.plainObjects||o.allowPrototypes||!a.call(Object.prototype,n))&&(t[n]=!0)}return t}if("object"!==typeof t)return[t].concat(n);var i=t;return Array.isArray(t)&&!Array.isArray(n)&&(i=r(t,o)),Array.isArray(t)&&Array.isArray(n)?(n.forEach((function(n,i){a.call(t,i)?t[i]&&"object"===typeof t[i]?t[i]=e(t[i],n,o):t.push(n):t[i]=n})),t):Object.keys(n).reduce((function(t,i){var r=n[i];return a.call(t,i)?t[i]=e(t[i],r,o):t[i]=r,t}),i)},l=function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},c=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},d=function(e){if(0===e.length)return e;for(var t="string"===typeof e?e:String(e),n="",a=0;a<t.length;++a){var i=t.charCodeAt(a);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?n+=t.charAt(a):i<128?n+=o[i]:i<2048?n+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?n+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(a+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(a)),n+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return n},u=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],a=0;a<t.length;++a)for(var o=t[a],r=o.obj[o.prop],s=Object.keys(r),l=0;l<s.length;++l){var c=s[l],d=r[c];"object"===typeof d&&null!==d&&-1===n.indexOf(d)&&(t.push({obj:r,prop:c}),n.push(d))}return i(t)},m=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},f=function(e){return null!==e&&"undefined"!==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};e.exports={arrayToObject:r,assign:l,compact:u,decode:c,encode:d,isBuffer:f,isRegExp:m,merge:s}},fde3:function(e,t,n){}}]);