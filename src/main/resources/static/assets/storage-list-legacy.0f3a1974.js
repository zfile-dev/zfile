System.register(["./admin-storage-legacy.9ba39bb1.js","./sortable.esm-legacy.a574004a.js","./useCommon-legacy.72ab0086.js","./index-legacy.33440654.js","./request-legacy.d578b778.js","./index-legacy.5c2a5b9a.js"],(function(e){"use strict";var a,n,t,c,o,r,i,s,u,l,d,f;return{setters:[function(e){a=e.d,n=e.s,t=e.a,c=e.b,o=e.l,r=e.c},function(e){i=e.S},function(e){s=e.u},function(e){u=e.E},function(e){l=e.E},function(e){d=e.r,f=e.c}],execute:function(){e("u",(function(e){var s=function(a){e.push("/admin/storage-edit/"+a.id)},d=function(e){u.confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(n){"confirm"===n&&a(e.id).then((function(e){l.success("删除成功"),S()}))}})},p=function(a){e.push("/admin/storage-filter/"+a.id)},y=function(a){e.push("/admin/storage-readme/"+a.id)},x=function(a){e.push("/admin/storage-password/"+a.id)},C=function(e){u.confirm("是否确认".concat(e.enable?"停止":"启用","存储源。"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(a){if("confirm"===a){var t=e.enable?"disable":"enable";n(e.id,t).then((function(){l.success((e.enable?"停止":"启用")+"成功"),e.enable=!e.enable}))}}})},k=function(e){b.value=e.id,h.value=!0},S=function(){m.value=!0,o().then((function(e){var a;v.value=e.data,a=document.querySelector(".storage-container"),i.create(a,{draggable:".storage-item",filter:".add-storage-btn",delay:g.value?300:0,onEnd:function(e){if(e.oldIndex!==e.newIndex){var a=v.value.splice(e.oldIndex,1)[0];v.value.splice(e.newIndex,0,a),r(v.value).then((function(){l.success("调整排序成功")}))}}}),m.value=!1}))},L=f((function(){return""===w.value?v.value:v.value.filter((function(e){return!!(e.name&&-1!==e.name.toLowerCase().indexOf(w.value.toLowerCase())||e.remark&&-1!==e.remark.toLowerCase().indexOf(w.value.toLowerCase())||e.type&&-1!==e.type.description.toLowerCase().indexOf(w.value.toLowerCase())||e.type&&-1!==e.type.key.toLowerCase().indexOf(w.value.toLowerCase()))}))}));return{init:S,loading:m,searchKey:w,storageListSearchResult:L,handleOperator:function(e){switch(e.operator){case"edit":s(e.storage);break;case"enable":C(e.storage);break;case"readmeManager":y(e.storage);break;case"cacheManager":k(e.storage);break;case"filterManager":p(e.storage);break;case"pwdManager":x(e.storage);break;case"delete":d(e.storage)}},addStorage:function(){e.push("/admin/storage-edit")},editStorage:s,deleteStorage:d,handleClose:function(e){u.confirm("是否确认关闭？关闭后填写的数据不会保留。",{type:"warning"}).then((function(a){e()})).catch((function(e){}))},showFilterPage:p,showReadmePage:y,showPasswordPage:x,switchEnableStatus:C,cacheManageVisible:h,currentCacheManageId:b,switchCacheEnableStatus:function(e){var a=e.enableCache?"enable":"disable";t(e.id,a).then((function(){l.success("修改成功")}))},switchCacheAutoRefreshStatus:function(e){var a=e.autoRefreshCache?"start":"stop";c(e.id,a).then((function(){l.success("修改成功")}))},cacheManage:k}}));var g=s().isMobile,h=d(!1),b=d(),m=d(!1),v=d([]),w=d("")}}}));
